"use strict";(self.webpackChunkmd_note=self.webpackChunkmd_note||[]).push([[3160],{6029:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>a});var t=s(5893),r=s(1151);const i={},o=void 0,l={id:"NextJs/NextAuth",title:"NextAuth",description:"Next Auth",source:"@site/docs/NextJs/NextAuth.md",sourceDirName:"NextJs",slug:"/NextJs/NextAuth",permalink:"/my-notes/docs/NextJs/NextAuth",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/NextJs/NextAuth.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"How to setup a scheduler in Laravel",permalink:"/my-notes/docs/Laravel/Scheduler"},next:{title:"Nginx_basic",permalink:"/my-notes/docs/Nginx/Nginx_basic"}},c={},a=[{value:"Next Auth",id:"next-auth",level:2}];function d(n){const e={code:"code",h2:"h2",li:"li",ol:"ol",pre:"pre",ul:"ul",...(0,r.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{id:"next-auth",children:"Next Auth"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Install Next Auth"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"yarn add next-auth\n# or\nnpm install next-auth\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.ol,{start:"2",children:["\n",(0,t.jsx)(e.li,{children:"Create a file in the root of your project called pages/api/auth/[...nextauth]/routes.js"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"import NextAuth from 'next-auth'\nimport Providers from 'next-auth/providers'\n\nconst options = {\n  providers: [\n    Providers.GitHub({\n      clientId: process.env.GITHUB_ID,\n      clientSecret: process.env.GITHUB_SECRET\n    }),\n    // ...add more providers here\n  ],\n  database: process.env.DATABASE_URL\n}\n\nexport default (req, res) => NextAuth(req, res, options)\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.ol,{start:"3",children:["\n",(0,t.jsx)(e.li,{children:"Add the following to your pages/_app.js file"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"import { Provider } from 'next-auth/client'\n\nexport default function App({ Component, pageProps }) {\n  return (\n    <Provider session={pageProps.session}>\n      <Component {...pageProps} />\n    </Provider>\n  )\n}\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.ol,{start:"4",children:["\n",(0,t.jsx)(e.li,{children:"Setup OAuth Provider"}),"\n"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"4.1. Create a new OAuth App on GitHub"}),"\n",(0,t.jsx)(e.li,{children:"4.2. Add the following to your .env.local file"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"GITHUB_ID=YOUR_GITHUB_ID\nGITHUB_SECRET=YOUR_GITHUB_SECRET\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"4.3. Add the following to your pages/api/auth/[...nextauth].js file"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"import NextAuth from 'next-auth'\nimport Providers from 'next-auth/providers'\n\nconst options = {\n  providers: [\n    Providers.GitHub({\n      clientId: process.env.GITHUB_ID,\n      clientSecret: process.env.GITHUB_SECRET\n    })\n  ]\n}\n\nexport default (req, res) => NextAuth(req, res, options)\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.ol,{start:"5",children:["\n",(0,t.jsx)(e.li,{children:"Add the following to your pages/index.js file"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"import { signIn, signOut, useSession } from 'next-auth/client'\n\nexport default function Page() {\n  const [ session, loading ] = useSession()\n\n  return <>\n    {!session && <>\n      Not signed in <br/>\n      <button onClick={signIn}>Sign in</button>\n    </>}\n    {session && <>\n      Signed in as {session.user.email} <br/>\n      <button onClick={signOut}>Sign out</button>\n    </>}\n  </>\n}\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.ol,{start:"6",children:["\n",(0,t.jsx)(e.li,{children:"Protecting Pages"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"import { useSession } from 'next-auth/client'\n\nexport default function Page() {\n  const [ session, loading ] = useSession()\n\n  if(session) { return <p>Protected content</p> }\n\n  return <p>Access Denied</p>\n}\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.ol,{start:"7",children:["\n",(0,t.jsx)(e.li,{children:"Accessing Session Data"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"import { useSession } from 'next-auth/client'\n\nexport default function Page() {\n  const [ session, loading ] = useSession()\n\n  return <>\n    {!session && <>\n      Not signed in <br/>\n      <button onClick={signIn}>Sign in</button>\n    </>}\n    {session && <>\n      Signed in as {session.user.email} <br/>\n      <pre>{JSON.stringify(session, null, 2)}</pre>\n    </>}\n  </>\n}\n"})})]})}function u(n={}){const{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},1151:(n,e,s)=>{s.d(e,{Z:()=>l,a:()=>o});var t=s(7294);const r={},i=t.createContext(r);function o(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);