"use strict";(self.webpackChunkmd_note=self.webpackChunkmd_note||[]).push([[7961],{9140:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>m,frontMatter:()=>c,metadata:()=>i,toc:()=>l});var s=r(5893),o=r(1151);const c={},d="Docker composer",i={id:"Docker/Docker_compose",title:"Docker composer",description:"user docker composer run complex applications",source:"@site/docs/Docker/Docker_compose.md",sourceDirName:"Docker",slug:"/Docker/Docker_compose",permalink:"/my-notes/docs/Docker/Docker_compose",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Docker/Docker_compose.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Docker Environment Variables",permalink:"/my-notes/docs/Docker/Docker-env-var"},next:{title:"Docker engine",permalink:"/my-notes/docs/Docker/Docker_engine"}},a={},l=[{value:"Docker compose - build",id:"docker-compose---build",level:3},{value:"Docker compose -version",id:"docker-compose--version",level:3},{value:"valuable commands",id:"valuable-commands",level:2}];function t(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"docker-composer",children:"Docker composer"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"docker run container_name/app_name\n\ndocker run mongodb\n\ndocker run redis:alpine\n\ndocker run ansible\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"user docker composer run complex applications"}),"\n",(0,s.jsx)(n.p,{children:"docker-compose.yml"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:'services:\n  web:\n    image: "contaimer_name/app"\n  database:\n    image: "mongodb"\n  messaging:\n    image: "redis:alpine"\n  orchestration:\n    image: "ansible"\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker-compose up\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"docker run multiple applications"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cmd",children:"docker run -d --name=redis redis\n\ndocker run -d --name=db postgres:9.4 result-app\n\ndocker run -d --name=vote -p 5000:80 voting-app\n\ndocker run -d --name=result -p 5001:80\n\ndocker run -d --name=worker worker\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"docker run --links\nlink applications"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cmd",children:"docker run -d --name=redis redis\n\ndocker run -d --name=db postgres:9.4 --link db:db result-app\n\ndocker run -d --name=vote -p 5000:80 --link redis:redis voting-app\n\ndocker run -d --name=result -p 5001:80\n\ndocker run -d --name=worker --link db:db --link redis:redis worker\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"docker compose"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:"redis:\n  image: redis\ndb:\n  image: postgres: 9.4\nvote:\n  image: voting-app\n  ports:\n    - 5000:80\n  links:\n    - redis\n\nresult:\n  image: result-app\n  ports:\n    - 5001:80\n  links:\n    - db\n\nworker:\n  image: worker\n  links:\n    - redis\n    - db\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"run compose file"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cmd",children:"docker-conpose up\n"})}),"\n",(0,s.jsx)(n.h3,{id:"docker-compose---build",children:"Docker compose - build"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:"redis:\n  image: redis\ndb:\n  image: postgres: 9.4\nvote:\n  build: ./vote\n  ports:\n    - 5000:80\n  links:\n    - redis\n\nresult:\n  build: ./result\n  ports:\n    - 5001:80\n  links:\n    - db\n\nworker:\n  image: worker\n  links:\n    - redis\n    - db\n"})}),"\n",(0,s.jsx)(n.h3,{id:"docker-compose--version",children:"Docker compose -version"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"version 1"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:"redis:\n  image: redis\ndb:\n  image: postgres: 9.4\nvote:\n  build: ./vote\n  ports:\n    - 5000:80\n  links:\n    - redis\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"version 2"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:"version: 2\nservices:\n  redis:\n    image: redis\n\n    networks:\n      - back-end\n  db:\n    image: postgres: 9.4\n    network:\n      - backend-end\n  vote:\n    build: ./vote\n    network:\n      - front-end\n      - back-end\n\n  result:\n    image: result\n    network:\n      - front-end\n      - back-end\n\nnetworks:\n  front-end:\n  back-end:\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"version 3"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:"version: 3\nservices:\n  redis:\n    image: redis\n  db:\n    image: postgres: 9.4\n  vote:\n    build: ./vote\n    ports:\n      - 5000:80\n"})}),"\n",(0,s.jsx)(n.h2,{id:"valuable-commands",children:"valuable commands"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# clean workspace\n\n-docker container rm $(docker container ls -aq) # remove all containers\n\n-docker rmi $(docker images -q) # remove all images\n\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:'version: "3.8"\nservices:\n  web:\n    build: ./frontend\n    ports:\n      - 3000:3000\n  api:\n    build: ./backend\n    ports:\n      - 3001:3001\n    environment:\n      - DB_URL: mongodb://db/db_name\n  db:\n    image: mongo:4.0-xenial\n    ports:\n      - 27017:27017\n    volumes:\n      - mongo-data:/data/db\n\nvolumes:\n  mongo-data:\n'})})]})}function m(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>i,a:()=>d});var s=r(7294);const o={},c=s.createContext(o);function d(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);