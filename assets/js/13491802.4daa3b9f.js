"use strict";(self.webpackChunkmd_note=self.webpackChunkmd_note||[]).push([[3035],{6646:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>p});var t=s(5893),r=s(1151);const i={},o="Use Azure Pipeline to Deploy Vite Vue App to Siteground(Share Hosting)",a={id:"Azure/Pipeline/Pipeline_Siteground",title:"Use Azure Pipeline to Deploy Vite Vue App to Siteground(Share Hosting)",description:"Create Siteground SSH Key",source:"@site/docs/Azure/Pipeline/Pipeline_Siteground.md",sourceDirName:"Azure/Pipeline",slug:"/Azure/Pipeline/Pipeline_Siteground",permalink:"/my-notes/docs/Azure/Pipeline/Pipeline_Siteground",draft:!1,unlisted:!1,editUrl:"https://github.com/jishen027/my-notes/tree/main/docs/docs/Azure/Pipeline/Pipeline_Siteground.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Create Azure Pipeline for Digital Ocean using Docker and SSH",permalink:"/my-notes/docs/Azure/Pipeline/Pipeline_Digital_Ocean"},next:{title:"Cypress Fundamentals",permalink:"/my-notes/docs/Cypress/Cypress_Fundamentals"}},l={},p=[{value:"Create Siteground SSH Key",id:"create-siteground-ssh-key",level:3},{value:"Create Azure Pipeline",id:"create-azure-pipeline",level:3}];function d(e){const n={code:"code",h1:"h1",h3:"h3",li:"li",ol:"ol",pre:"pre",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"use-azure-pipeline-to-deploy-vite-vue-app-to-sitegroundshare-hosting",children:"Use Azure Pipeline to Deploy Vite Vue App to Siteground(Share Hosting)"}),"\n",(0,t.jsx)(n.h3,{id:"create-siteground-ssh-key",children:"Create Siteground SSH Key"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Login to Siteground"}),"\n",(0,t.jsx)(n.li,{children:"Go to Devs > SSH Keys Manager"}),"\n",(0,t.jsx)(n.li,{children:"Click Generate New Key"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"create-azure-pipeline",children:"Create Azure Pipeline"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Login to Azure DevOps"}),"\n",(0,t.jsx)(n.li,{children:"Create Azure_Pipeline.yml file for the project"}),"\n",(0,t.jsx)(n.li,{children:"Add the following code to the file"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'# Node.js with Vue\n# Build a Node.js project that uses Vue.\n# Add steps that analyze code, save build artifacts, deploy, and more:\n# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript\n\ntrigger:\n  - master\n\npool:\n  vmImage: ubuntu-latest\n\n# Variables\nvariables:\n  - group: "sshKeyPassphrase" # Link the variable group\n  - name: "frontendDir"\n    value: "frontend"\n  - name: "backendDir"\n    value: "backend"\n  - name: "remoteServer"\n    value: "ssh.the360expo.com"\n  - name: "remoteUser"\n    value: "u413-vckbx5xu4xp8"\n  - name: "remotePath"\n    value: "/home/u413-vckbx5xu4xp8/www/virtualconsultation.the360expo.com/public_html"\n  - name: "remoteServerPath"\n    value: "/home/u413-vckbx5xu4xp8/www/virtualconsultation.the360expo.com/vpc_server"\n  - name: "sshKeySecureFileName"\n    value: "vpc-corn-job-pri.pub"\n\n# Install Node.js\nsteps:\n  - task: NodeTool@0\n    inputs:\n      versionSpec: "14.x"\n    displayName: "Install Node.js"\n\n  # Download SSH Key\n  - task: DownloadSecureFile@1\n    name: sshKey\n    displayName: "Download SSH Key"\n    inputs:\n      secureFile: "vpc-corn-job-pri.pub" # Make sure this is the private key\n\n  # Install and Build Frontend\n  - script: |\n      cd $(frontendDir)\n      cp .env.prod .env\n      npm install\n      npm run build\n    displayName: "npm install and build"\n\n  # SCP Frontend dist folder to Remote Server\n  - script: |\n      echo "Secure File Path: $(sshKey.secureFilePath)"\n      chmod 600 $(sshKey.secureFilePath)  # Fix permissions\n      eval $(ssh-agent -s)  # Start the SSH agent\n      mkdir -p ~/.ssh  # Ensure the .ssh directory exists\n      touch ~/.ssh/known_hosts  # Ensure the known_hosts file exists\n      ssh-keyscan -p 18765 $(remoteServer) >> ~/.ssh/known_hosts  # Add the remote server to the known hosts file\n      echo "$(corn_ssh_key_passphrase)" | ssh-add $(sshKey.secureFilePath)  # Add the SSH key to the agent\n      sshpass -p "$(corn_ssh_key_passphrase)" scp -P 18765 -r $(frontendDir)/dist/* $(remoteUser)@$(remoteServer):$(remotePath)  # Use sshpass to pass the passphrase and perform the SCP operation\n    displayName: "SCP Frontend dist folder to Remote Server"\n    env:\n      corn_ssh_key_passphrase: $(corn_ssh_key_passphrase) # Passphrase for the SSH key\n'})})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>o});var t=s(7294);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);